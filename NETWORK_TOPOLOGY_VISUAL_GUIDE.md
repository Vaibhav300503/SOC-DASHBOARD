# Network Topology - Visual Guide

## What You Should See

### Phase 1: Loading (1-2 seconds)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Network Topology                                   â”‚
â”‚  Static 2D star topology with endpoint data...      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚              âŸ³ Loading Topology...                 â”‚
â”‚              Fetching 97601 logs from database     â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2: Loaded with 1 Endpoint
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Network Topology                                   â”‚
â”‚  Static 2D star topology with endpoint data...      â”‚
â”‚  [Updated: 15:39:45] [Search...] [Reset] [Filter]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚                        ğŸ–¥ï¸                          â”‚
â”‚                    Main Server                      â”‚
â”‚                         |                           â”‚
â”‚                         |                           â”‚
â”‚                    â•±â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â•²                    â”‚
â”‚                   /             \                   â”‚
â”‚                  /               \                  â”‚
â”‚                 â—                 â—                 â”‚
â”‚          DESKTOP-UQJ2EBO    (other endpoints)      â”‚
â”‚          100.114.141.67                            â”‚
â”‚                                                     â”‚
â”‚  Legend:                    Stats:                 â”‚
â”‚  â— Online                   1 Agents               â”‚
â”‚  â— Offline                  1 Online               â”‚
â”‚  â— Degraded                 0 Offline              â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 3: Empty State (If No Endpoints)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Network Topology                                   â”‚
â”‚  Static 2D star topology with endpoint data...      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚                                                     â”‚
â”‚                      ğŸ”                            â”‚
â”‚              No Endpoints in Logs                  â”‚
â”‚         Waiting for log data with endpoint info    â”‚
â”‚                                                     â”‚
â”‚              [Retry Fetch]                         â”‚
â”‚                                                     â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Console Output

### Successful Load
```
ğŸš€ Fetching endpoint names from logs...
ğŸ“Š Total logs fetched: 97601
ğŸ“‹ Sample log structure: {
  endpoint: "DESKTOP-UQJ2EBO",
  metadata_endpoint: "DESKTOP-UQJ2EBO",
  metadata_hostname: "DESKTOP-UQJ2EBO",
  raw_endpoint: null,
  raw_hostname: "DESKTOP-UQJ2EBO"
}
âœ… Extracted 1 unique endpoints from logs
  - DESKTOP-UQJ2EBO: 97601 events
ğŸ”„ Syncing endpoints to agents collection...
âœ… Endpoints synced to agents collection: {
  success: true,
  message: "Synced 1/1 endpoints",
  results: [...]
}
```

### With Multiple Endpoints (Future)
```
ğŸš€ Fetching endpoint names from logs...
ğŸ“Š Total logs fetched: 97601
âœ… Extracted 5 unique endpoints from logs
  - DESKTOP-UQJ2EBO: 50000 events
  - cyberpi.tail4c43e.ts.net: 20000 events
  - arunkasthuri-m.tail4c43e.ts.net: 15000 events
  - manjira-ubuntu.tail4c43e.ts.net: 10000 events
  - vaibhav-windows.tail4c43e.ts.net: 2601 events
ğŸ”„ Syncing endpoints to agents collection...
âœ… Endpoints synced to agents collection: {
  success: true,
  message: "Synced 5/5 endpoints",
  results: [...]
}
```

---

## Topology with Multiple Endpoints

### Visual Layout (5 Endpoints)
```
                        ğŸ–¥ï¸
                    Main Server
                         
        â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•²
       /                  |                  \
      /                   |                   \
     â—                    â—                    â—
  Endpoint 1          Endpoint 2          Endpoint 3
  
     â—                    â—
  Endpoint 4          Endpoint 5
```

### With Status Colors
```
                        ğŸ–¥ï¸ (Blue)
                    Main Server
                         
        â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•²
       /                  |                  \
      /                   |                   \
     â— (Green)           â— (Green)           â— (Red)
  Online              Online              Offline
  
     â— (Amber)          â— (Green)
  Degraded            Online
```

---

## Interactions

### Hover Over Endpoint
```
Tooltip appears:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DESKTOP-UQJ2EBO              â”‚
â”‚ ID: DESKTOP-UQJ2EBO          â”‚
â”‚ Hostname: DESKTOP-UQJ2EBO    â”‚
â”‚ IP: 100.114.141.67           â”‚
â”‚ OS: Windows                  â”‚
â”‚ Status: active               â”‚
â”‚ Last Seen: Just now          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Search
```
[Search agents...] â†’ Type "DESKTOP"
â†“
Shows only matching endpoints
```

### Filter
```
[Filter] â†’ Toggle checkboxes
â˜‘ Online
â˜‘ Offline
â˜‘ Degraded
â†“
Shows only selected status endpoints
```

### Zoom/Pan
```
Mouse wheel: Zoom in/out
Click + drag: Pan around
[Reset]: Return to original view
```

---

## Data Sync to MongoDB

### Before Sync
```
MongoDB agents collection:
(empty or old data)
```

### After Sync
```
MongoDB agents collection:
{
  _id: ObjectId(...),
  agent_id: "DESKTOP-UQJ2EBO",
  endpoint_name: "DESKTOP-UQJ2EBO",
  hostname: "DESKTOP-UQJ2EBO",
  ip_address: "100.114.141.67",
  os_type: "Windows",
  status: "active",
  labels: ["auto-synced-from-logs"],
  last_seen: ISODate("2026-01-06T15:39:45.000Z"),
  first_registered: ISODate("2026-01-06T15:39:45.000Z")
}
```

---

## Performance Timeline

### Initial Load
```
0ms    â”œâ”€ Component mounts
       â”‚
50ms   â”œâ”€ isLoading = true (spinner shows)
       â”‚
100ms  â”œâ”€ fetchAgents() called
       â”‚
150ms  â”œâ”€ API request sent
       â”‚
1000ms â”œâ”€ API response received (500-2000ms network)
       â”‚
1100ms â”œâ”€ Data processing (100-500ms)
       â”‚
1200ms â”œâ”€ Endpoint sync (100-300ms)
       â”‚
1300ms â”œâ”€ Layout calculation (10-50ms)
       â”‚
1350ms â”œâ”€ Rendering (50-200ms)
       â”‚
1400ms â”œâ”€ isLoading = false (spinner hidden)
       â”‚
1450ms â””â”€ Topology displayed
```

---

## Troubleshooting Checklist

### âœ“ Loading spinner appears
- Component is mounting correctly
- Fetch is starting

### âœ“ Spinner disappears after 1-2 seconds
- API request completed
- Data processing finished

### âœ“ Endpoints show in topology
- Endpoint extraction working
- Layout calculation working
- Rendering working

### âœ“ Console shows logs
- Debugging enabled
- Can track data flow

### âœ“ Endpoints in agents collection
- Sync endpoint working
- MongoDB upsert working

---

## Expected Behavior

### Current (1 Endpoint)
- Load time: 1-2 seconds
- Shows 1 node + center
- All 97,601 events from DESKTOP-UQJ2EBO
- Topology displays correctly

### With Multiple Endpoints (Future)
- Load time: 1-3 seconds (slightly longer)
- Shows N nodes + center
- Events distributed across endpoints
- Topology shows star layout with all endpoints

### With Many Endpoints (100+)
- Load time: 2-4 seconds
- May need pagination
- Consider backend aggregation
- Performance still acceptable

---

## Success Indicators

âœ… Loading spinner shows while fetching
âœ… Console logs show endpoint extraction
âœ… Endpoints appear in topology (or empty state)
âœ… Endpoints synced to MongoDB agents collection
âœ… Retry button works if needed
âœ… Load time is 1-3 seconds
âœ… No errors in browser console
âœ… No errors in backend logs
